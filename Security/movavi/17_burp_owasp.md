

**Burp Suite** — это «шпионский набор» для тестирования безопасности сайтов. Представь, что это волшебная лупа, которая позволяет увидеть и изменить всё, что происходит между твоим браузером и сайтом. 

---

### **Как работает Burp Suite?**  
Burp Suite перехватывает запросы, которые браузер отправляет на сайт (например, логины, поиск, платежи), и позволяет их изучать или менять. Это помогает находить уязвимости, как XSS или SQL-инъекции.  

---

### **Зачем нужен сертификат?**  
**Причина:**  
Сайты с HTTPS шифруют данные, чтобы их нельзя было перехватить. Burp Suite нужно «подслушать» это общение, но браузер не доверяет посторонним. Сертификат — это как «пропуск», который убеждает браузер: «Burp — свой, можно расшифровывать!».  

**Пример:**  
Без сертификата браузер будет кричать: «Внимание! Кто-то подслушивает!». С сертификатом — молча разрешит работу.  

**Сравнение:**  
Как если бы ты подделал удостоверение полицейского, чтобы проникнуть на секретную базу (но только для учебных целей!).  

### **Как добавить сертификат Burp в браузер**  
**Шаги:**  
1. **Скачай сертификат:**  
   - Запусти Burp Suite.  
   - Перейди в `Proxy` → `Options` → вкладка `Proxy Listeners` → кнопка `Import/export CA certificate`.  
   - Выбери `Export` и сохрани файл `cacert.der`.  

2. **Установи сертификат в браузер (на примере Chrome):**  
   - Открой **Настройки** → **Конфиденциальность и безопасность** → **Безопасность** → **Управление сертификатами**.  
   - Во вкладке **Доверенные корневые центры сертификации** нажми **Импортировать**.  
   - Выбери файл `cacert.der` и заверши установку.  

---

### **Начальная настройка Burp Suite**  
1. **Запусти Burp Suite:**  
   - Скачай Community-версию с официального сайта.  
   - Открой Burp и создай новый проект (всё по умолчанию).  

2. **Настрой браузер:**  
   - Установи расширение для управления прокси (например, **FoxyProxy** для Chrome/Firefox).  
   - Настрой прокси: адрес `127.0.0.1` (это твой компьютер), порт `8080` (стандартный для Burp).  

3. **Включи перехват трафика:**  
   - В Burp перейди во вкладку `Proxy` → `Intercept` и нажми `Intercept is on`.  
   - Теперь все запросы из браузера будут попадать в Burp.  

| Действие             | Как сделать?                                     | Пример/Сравнение                      |     |
| -------------------- | ------------------------------------------------ | ------------------------------------- | --- |
| **Перехват запроса** | Включи `Intercept is on` в Burp                  | Как остановить письмо перед отправкой |     |
| **Изменение данных** | Измени текст в перехваченном запросе → `Forward` | Поменять "цена=100" на "цена=1"       |     |

### Важно!
- Используй Burp Suite только на сайтах, где тебе разрешено тестирование (например, CTF-задачи или учебные проекты).  
- Не взламывай чужие сайты без разрешения — это незаконно!  

-------

## XSS

### 1. **Хранимая XSS (Stored XSS)**  
**Как работает:**  
Злоумышленник сохраняет вредоносный код на сервере сайта (например, в комментариях, сообщениях или профилях). Когда другие пользователи открывают страницу, код автоматически выполняется.  
**Пример:**  
Представь, что кто-то написал в комментариях к видео на YouTube скрипт, который крадет куки (данные для входа). Все, кто прочитает этот комментарий, могут стать жертвами.  
**Сравнение:**  
Как вирус, который живет в школьном компьютере и заражает всех, кто им пользуется.

---

### 2. **Отраженная XSS (Reflected XSS)**  
**Как работает:**  
Вредоносный код не сохраняется на сервере, а «отражается» от него. Обычно злоумышленник заставляет жертву перейти по специальной ссылке (например, через фишинговое письмо). Код выполняется только у того, кто кликнул на ссылку.  
**Пример:**  
Тебе прислали ссылку вида `https://example.com/search?q=<script>вредоносный_код</script>`. Если сайт не защищен, код запустится в твоем браузере.  
**Сравнение:**  
Как поддельная записка, которую тебе передали, — она работает только для тебя и только один раз.

---

### 3. **DOM-based XSS**  
**Как работает:**  
Вредоносный код не касается сервера вообще! Он изменяет структуру страницы (DOM) прямо в браузере жертвы, например, через параметры в URL.  
**Пример:**  
Ссылка вроде `https://example.com#<script>alert('hacked')</script>`. Если сайт обрабатывает фрагменты URL неправильно, скрипт выполнится.  
**Сравнение:**  
Как фокусник, который меняет что-то на твоих глазах, но не оставляет следов — работает только в твоем браузере.

---

### **Сравнение в таблице:**
| Параметр             | Хранимая XSS              | Отраженная XSS             | DOM-based XSS                 |
| -------------------- | ------------------------- | -------------------------- | ----------------------------- |
| **Где хранится код** | На сервере (база данных)  | В URL или запросе          | В URL (часто после `#`)       |
| **Кто запускает**    | Все пользователи страницы | Тот, кто кликнул на ссылку | Тот, кто открыл страницу      |
| **Пример**           | Вредоносный комментарий   | Фишинговая ссылка в письме | Изменение параметров в адресе |

---

### **Почему это важно?**  
XSS позволяет злоумышленникам красть данные, подделывать действия пользователей или даже перенаправлять на вредоносные сайты. Защита: всегда проверяй данные, которые вводятся на сайт (валидация), и экранируй специальные символы (например, `<` превращать в `&lt;`). 


---
## Инъекции

### 1. **SQL-инъекция (SQL Injection)**  
**Как работает:**  
Злоумышленник вводит вредоносный код SQL (язык баз данных) через форму на сайте (например, логин или поиск). Если сайт не защищен, этот код заставляет базу данных выполнить опасные действия: показать секретные данные, удалить информацию или даже взломать аккаунт.  

**Пример:**  
Допустим, есть форма входа с логином и паролем.  
Вместо пароля злоумышленник пишет: `' OR 1=1 --`.  
**Что произойдет?**  
Сайт может выполнить запрос:  
```sql
SELECT * FROM users WHERE login = 'admin' AND password = '' OR 1=1 --'
```  
`1=1` всегда верно, а `--` закомментирует остаток запроса. Результат: злоумышленник войдет как админ без пароля!  

**Сравнение:**  
Как если бы ты сказал охраннику: «Я забыл пропуск, но ведь 1+1=2?» → охранник пропускает тебя, потому что ответ верный.  

---

### 2. **Email-инъекция (Email Injection)**  
**Как работает:**  
Через форму отправки писем (например, «Свяжитесь с нами») злоумышленник добавляет в поле email или текст специальные символы, чтобы отправить письмо **не только владельцу сайта**, но и другим людям, изменить тему или даже отправить спам.  

**Пример:**  
В поле «Ваш email» вместо `user@example.com` пишут:  
```
user@example.com\nBCC: spam@evil.com, fraud@evil.com
```  
Символ `\n` (новая строка) заставляет сервер добавить скрытых получателей (BCC). Письмо уйдет и на `user@example.com`, и на спам-адреса.  

**Сравнение:**  
Как подделать конверт, чтобы почтальон отправил копии твоего письма десяткам людей без твоего ведома.  

---

### **Сравнение в таблице:**  
| Параметр           | SQL-инъекция                  | Email-инъекция                  |  
|---------------------|-------------------------------|----------------------------------|  
| **Цель**           | Украсть/удалить данные из БД | Отправить спам, фишинг, перехватить письма |  
| **Где используется** | Формы ввода (логин, поиск)   | Контактные формы, формы подписки |  
| **Пример атаки**   | `' OR 1=1 --` в поле пароля  | Добавление `\nBCC: spam@evil.com` в email |  
| **Защита**         | Использовать параметризованные запросы | Проверять ввод на наличие спецсимволов (например, `\n`, `;`) |  

---

### **Почему это важно?**  
- **SQL-инъекции** могут уничтожить базу данных сайта или украсть пароли, номера карт и другие секреты.  
- **Email-инъекции** превращают контактную форму в оружие для рассылки спама или атак на других пользователей.  

**Как защититься?**  
- Для SQL: Всегда использовать **параметризованные запросы** (это как «шаблоны» для БД, куда нельзя влезть с вредоносным кодом).  
- Для Email: Проверять вводимые данные, удалять или экранировать спецсимволы (например, заменять `\n` на пробел).  

---


## OWASP top 2021

### **1. Сломанный контроль доступа (Broken Access Control)**  
**Что это:**  
Пользователи получают доступ к тому, что им запрещено (например, к чужим аккаунтам или админ-панели).  
**Пример:**  
Если заменить в URL `user_id=123` на `user_id=456`, можно увидеть чужой профиль.  
**Сравнение:**  
Как если бы любой мог зайти в твою комнату, потому что дверь без замка.  

---

### **2. Ошибки в шифровании (Cryptographic Failures)**  
**Что это:**  
Данные передаются или хранятся без защиты (пароли, номера карт и т.д.).  
**Пример:**  
Сайт сохраняет пароли в открытом виде, а не в зашифрованном.  
**Сравнение:**  
Как отправлять секреты по почте открыткой вместо запечатанного конверта.  

---

### **3. Инъекции (Injection)**  
**Что это:**  
Злоумышленник внедряет вредоносный код (SQL, XSS, команды ОС).  
**Пример:**  
Ввод `' OR 1=1 --` в поле пароля для взлома базы данных.  
**Сравнение:**  
Как дать учителю поддельную записку с командой «отпустите весь класс домой».  

---

### **4. Небезопасный дизайн (Insecure Design)**  
**Что это:**  
Ошибки в архитектуре приложения, которые нельзя исправить «заплатками».  
**Пример:**  
Приложение не проверяет, есть ли у пользователя деньги перед переводом.  
**Сравнение:**  
Как строить дом без чертежей — стены есть, а крыша течет.  

---

### **5. Ошибки в настройках безопасности (Security Misconfiguration)**  
**Что это:**  
Неправильные настройки сервера или приложения (дефолтные пароли, открытые порты).  
**Пример:**  
Админ оставил пароль `admin:admin` на сайте.  
**Сравнение:**  
Как оставить окна открытыми в доме с табличкой «Заходите, у нас есть золото!».  

---

### **6. Устаревшие компоненты (Vulnerable and Outdated Components)**  
**Что это:**  
Использование библиотек, плагинов или CMS с известными уязвимостями.  
**Пример:**  
Сайт работает на WordPress версии 4.0, которую взламывают за 5 минут.  
**Сравнение:**  
Как ездить на машине без тормозов — рано или поздно врежешься.  

---

### **7. Слабая аутентификация (Identification and Authentication Failures)**  
**Что это:**  
Проблемы с входом в систему: простые пароли, нет двухфакторной аутентификации (2FA).  
**Пример:**  
Пароль `123456` или отсутствие проверки кода из SMS.  
**Сравнение:**  
Как класть ключ от дома под коврик — любой сможет найти.  

---

### **8. Нарушение целостности данных (Software and Data Integrity Failures)**  
**Что это:**  
Злоумышленник подменяет данные или код (например, вредоносные обновления).  
**Пример:**  
Хакер внедрил вирус в обновление программы.  
**Сравнение:**  
Как если бы курьер подменил твой заказ еды на испорченную пиццу.  

---

### **9. Отсутствие мониторинга (Security Logging and Monitoring Failures)**  
**Что это:**  
Атаки не обнаруживают, потому что нет логов или систем оповещения.  
**Пример:**  
Сайт взломали, но админ узнал об этом только через месяц.  
**Сравнение:**  
Как не заметить, что вор забрал все телевизоры из магазина, потому что нет камер.  

---

### **10. Подделка запросов на сервере (Server-Side Request Forgery, SSRF)**  
**Что это:**  
Хакер заставляет сервер отправить запрос к внутренним системам (например, к базе данных).  
**Пример:**  
Ссылка `https://site.com?url=internal-server.local` дает доступ к внутренней сети компании.  
**Сравнение:**  
Как обмануть охранника, чтобы он провел тебя в секретную лабораторию.  

---
### **Сводная таблица**  
| Уязвимость                     | Пример атаки                          | Сравнение                           |  
|---------------------------------|---------------------------------------|-------------------------------------|  
| Сломанный контроль доступа      | Доступ к чужим данным через URL       | Дверь без замка                     |  
| Ошибки шифрования               | Пароли в открытом виде                | Секреты на открытке                 |  
| Инъекции                        | `' OR 1=1 --` в поле ввода            | Поддельная записка учителю          |  
| Небезопасный дизайн             | Нет проверки платежа                  | Дом без чертежей                    |  
| Ошибки в настройках             | Дефолтный пароль `admin:admin`        | Открытые окна с золотом             |  
| Устаревшие компоненты           | WordPress 4.0                         | Машина без тормозов                 |  
| Слабая аутентификация           | Пароль `123456`                       | Ключ под ковриком                   |  
| Нарушение целостности данных    | Вредоносное обновление ПО             | Испорченная пицца вместо заказа     |  
| Отсутствие мониторинга          | Взлом не заметили месяц               | Магазин без камер                   |  
| SSRF                            | Запрос к внутренней сети              | Обман охранника                     |  

### **Как защититься?**  
- Используйте сложные пароли + 2FA.  
- Обновляйте софт и библиотеки.  
- Шифруйте данные и настраивайте права доступа.  
- Проверяйте ввод пользователей (особенно в формах).  
- Ведите логи и мониторьте активность.  
